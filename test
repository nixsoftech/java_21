#!/bin/bash
# ============================================
# Script: sync-ubuntu-dists.sh
# Purpose: Dry-run & sync selected Ubuntu dists
# Author: Your Name
# ============================================

# --- Configuration ---
MIRROR_PATH="/ubuntu_packages/ubuntu/mirror/archive.ubuntu.com/ubuntu/dists"
SOURCE="rsync://archive.ubuntu.com/ubuntu/dists"
DISTS=("bionic" "bionic-updates" "bionic-security"
       "focal" "focal-updates" "focal-security"
       "jammy" "jammy-updates" "jammy-security")

echo "üîç Starting dry-run for selected distributions..."
echo "==================================================="

for dist in "${DISTS[@]}"; do
  echo -e "\nüîé Checking $dist ..."
  rsync -av --dry-run "${SOURCE}/${dist}/" "${MIRROR_PATH}/${dist}/"
done

echo -e "\n‚úÖ Dry-run completed. Review the list above."
read -p "Do you want to perform actual sync? (y/n): " confirm

if [[ $confirm =~ ^[Yy]$ ]]; then
    echo -e "\nüöÄ Starting real sync..."
    for dist in "${DISTS[@]}"; do
      echo -e "\n‚¨áÔ∏è Syncing $dist ..."
      rsync -av "${SOURCE}/${dist}/" "${MIRROR_PATH}/${dist}/"
    done
    echo -e "\nüéâ Sync completed successfully."
else
    echo -e "\n‚ùå Sync aborted by user."
fi
